# dnsmasq configuration for homelab
# Serves .home.arpa domains
#
# CUSTOMIZE: Replace placeholders with your network IPs

# Don't use /etc/hosts
no-hosts

# Forward all other queries to upstream DNS (router)
server=ROUTER_IP  # Router IP

# Never forward plain names (without a dot)
domain-needed

# Never forward addresses in the non-routed address spaces
bogus-priv

# Local domain
local=/home.arpa/

# .home.arpa domain entries - all point to services VM
# CUSTOMIZE: Update with your services VM IP
address=/portainer.home.arpa/SERVICES_IP
address=/grafana.home.arpa/SERVICES_IP
address=/prometheus.home.arpa/SERVICES_IP
address=/cadvisor.home.arpa/SERVICES_IP
address=/immich.home.arpa/SERVICES_IP
address=/photos.home.arpa/SERVICES_IP
address=/jellyfin.home.arpa/SERVICES_IP
address=/media.home.arpa/SERVICES_IP
address=/chat.home.arpa/SERVICES_IP
address=/llm.home.arpa/SERVICES_IP
address=/vllm.home.arpa/SERVICES_IP

# Proxmox and TrueNAS (proxied through Caddy on services VM)
address=/proxmox.home.arpa/SERVICES_IP
address=/pve.home.arpa/SERVICES_IP
address=/nas.home.arpa/SERVICES_IP
address=/truenas.home.arpa/SERVICES_IP

# Home Assistant
address=/ha.home.arpa/SERVICES_IP
address=/homeassistant.home.arpa/SERVICES_IP

# Homebridge
address=/homebridge.home.arpa/SERVICES_IP

# Wildcard for any other .home.arpa to services VM
address=/.home.arpa/SERVICES_IP

# DNS admin UI
address=/dns.home.arpa/SERVICES_IP

# Logging
log-queries
log-facility=/var/log/dnsmasq.log

# Homelab Caddy Configuration
# .home.arpa domain for internal services with HTTPS

{
    # Use internal CA for .home.arpa (self-signed)
    local_certs
}

# Portainer
portainer.home.arpa {
    reverse_proxy portainer:9000
}

# Grafana
grafana.home.arpa {
    reverse_proxy grafana:3000
}

# Prometheus
prometheus.home.arpa {
    reverse_proxy prometheus:9090
}

# Immich
immich.home.arpa, photos.home.arpa {
    reverse_proxy {$SVR_CORE_IP}:2283
}

# Jellyfin
jellyfin.home.arpa, media.home.arpa {
    reverse_proxy {$SVR_CORE_IP}:8096
}

# Open WebUI (LLM)
chat.home.arpa, llm.home.arpa {
    reverse_proxy {$SVR_CORE_IP}:3000
}

# vLLM API
vllm.home.arpa {
    reverse_proxy {$SVR_CORE_IP}:8000
}

# Home Assistant
ha.home.arpa, homeassistant.home.arpa {
    reverse_proxy {$HA_IP}:8123
}

# Proxmox
proxmox.home.arpa, pve.home.arpa {
    reverse_proxy https://{$PVE_IP}:8006 {
        transport http {
            tls_insecure_skip_verify
        }
    }
}

# TrueNAS
nas.home.arpa, truenas.home.arpa {
    reverse_proxy https://{$NAS_IP} {
        transport http {
            tls_insecure_skip_verify
        }
    }
}

# cAdvisor
cadvisor.home.arpa {
    reverse_proxy cadvisor:8080
}

# DNS Admin
dns.home.arpa {
    reverse_proxy dnsmasq:8080
}

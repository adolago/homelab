# Prometheus configuration for homelab
# CUSTOMIZE: Replace placeholders with your network configuration

global:
  scrape_interval: 15s
  evaluation_interval: 15s

alerting:
  alertmanagers: []

rule_files: []

scrape_configs:
  # Prometheus self-monitoring
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  # Node Exporter - services VM system metrics
  - job_name: 'node-exporter'
    static_configs:
      - targets: ['node-exporter:9100']
        labels:
          instance: 'services'

  # cAdvisor - Docker container metrics
  - job_name: 'cadvisor'
    static_configs:
      - targets: ['cadvisor:8080']
        labels:
          instance: 'services'

  # Proxmox VE host - via pve-exporter
  # CUSTOMIZE: Update with your Proxmox host IP
  - job_name: 'proxmox'
    static_configs:
      - targets: ['PROXMOX_IP']  # Proxmox IP
    relabel_configs:
      - source_labels: [__address__]
        target_label: __param_target
      - source_labels: [__param_target]
        target_label: instance
      - target_label: __address__
        replacement: pve-exporter:9221
    metrics_path: /pve

  # TrueNAS/Storage - node exporter
  # CUSTOMIZE: Update with your NAS IP
  - job_name: 'truenas'
    static_configs:
      - targets: ['NAS_IP:9100']  # NAS IP
        labels:
          instance: 'storage'

# Homelab Ansible Inventory
# All hosts use SSH key authentication
# Network: 192.168.178.0/24 (FRITZ!Box LAN)

all:
  vars:
    ansible_user: artur
    ansible_python_interpreter: /usr/bin/python3
    ansible_become: yes
    ansible_become_method: sudo

    # Common configuration
    timezone: Europe/Vienna
    ntp_servers:
      - 0.pool.ntp.org
      - 1.pool.ntp.org

    # DNS settings
    dns_server: "{{ hostvars['svr-core']['ansible_host'] }}"
    dns_domain: home.arpa

  children:
    workstations:
      hosts:
        wrk-main:
          ansible_host: 192.168.178.127
          ansible_connection: local
          machine_role: admin
          backup_enabled: true
          backup_repo: /mnt/nas/Backups/wrk-main
        wrk-mob:
          ansible_host: 192.168.178.60
          ansible_user: rutra
          machine_role: mobile
          backup_enabled: false

    hypervisors:
      hosts:
        svr-host:
          ansible_host: 192.168.178.88
          machine_role: proxmox
          pve_version: "9.0"

    servers:
      hosts:
        svr-core:
          ansible_host: 192.168.178.102
          machine_role: docker
          gpu_passthrough: true
          docker_compose_dir: /home/artur/docker
        svr-nas:
          ansible_host: 192.168.178.101
          machine_role: storage
          zfs_pools:
            - StorageLake
        svr-dmz:
          ansible_host: dmz.adolago.xyz
          ansible_ssh_common_args: '-o ProxyCommand="cloudflared access ssh --hostname %h"'
          machine_role: dmz

    # Groups for specific tasks
    docker_hosts:
      hosts:
        svr-core:
        svr-dmz:

    monitoring_targets:
      hosts:
        svr-core:
        svr-nas:
        svr-host:
